extends ../../layouts/default

block content
  .dash-wrap
    // HEADER
    .header(style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;")
      h2.welcome(style="margin:0;font-weight:800;font-size:22px;letter-spacing:0.5px;") Khuy·∫øn m√£i
      a.btn-dark(href="/admin/promotions/create" style="padding:10px 16px;font-weight:600;border-radius:10px;") + Th√™m khuy·∫øn m√£i

    // DESCRIPTION
    p(style="color:#6b7280;margin:0 0 24px;font-size:15px;")
      | Qu·∫£n l√Ω m√£ gi·∫£m gi√° v√† chi·∫øn d·ªãch khuy·∫øn m√£i t·∫°i ƒë√¢y.

    // SUMMARY CARD
    .card-summary(style="display:flex;align-items:center;justify-content:space-between;background:#fff4ee;padding:20px 24px;border-radius:16px;box-shadow:0 4px 12px rgba(0,0,0,0.04);margin-bottom:28px;")
      .left
        h3(style="margin:0;font-weight:700;color:#1f2937;") T·ªïng s·ªë m√£
        p(style="margin:4px 0 0;color:#6b7280;font-size:14px;") T·ªïng s·ªë khuy·∫øn m√£i trong h·ªá th·ªëng.
      .right
        span(style="font-size:32px;font-weight:800;color:#ff6a21;line-height:1;") #{coupons.length}

    // COUPONS TABLE
    if coupons.length
      table(style="width:100%;border-collapse:collapse;background:#fff;box-shadow:0 6px 16px rgba(0,0,0,0.05);border-radius:16px;overflow:hidden;")
        thead(style="background:#f9fafb;color:#555;font-size:15px;")
          tr
            th(style="text-align:left;padding:12px 16px;") Ti√™u ƒë·ªÅ
            th Lo·∫°i
            th Gi·∫£m gi√°
            th M√£
            th Ng√†y b·∫Øt ƒë·∫ßu
            th Ng√†y k·∫øt th√∫c
            th Tr·∫°ng th√°i
            th Thao t√°c
        tbody
          each c in coupons
            tr(style="border-top:1px solid #eee;")
              td(style="padding:12px 16px;")= c.title
              td(style="text-align:center")= c.type
              td(style="text-align:center;color:#ff6a21;font-weight:600;")= c.discountText
              td(style="text-align:center")= c.code
              td(style="text-align:center")= c.startdate ? new Date(c.startdate).toLocaleDateString('vi-VN') : "-"
              td(style="text-align:center")= c.enddate ? new Date(c.enddate).toLocaleDateString('vi-VN') : "-"
              td(style="text-align:center")
                if c.status === 'ACTIVE'
                  span(style="background:#e6f9ef;color:#1f7a47;padding:4px 10px;border-radius:8px;font-size:13px;font-weight:600;") ‚úì ƒêang ho·∫°t ƒë·ªông
                else if c.status === 'INACTIVE'
                  span(style="background:#fde8e8;color:#b42318;padding:4px 10px;border-radius:8px;font-size:13px;font-weight:600;") ‚úï Kh√¥ng ho·∫°t ƒë·ªông
                else
                  span(style="background:#f3f4f6;color:#555;padding:4px 10px;border-radius:8px;font-size:13px;font-weight:600;") ƒê√£ l√™n l·ªãch
              td(style="text-align:center")
                a.btn(href=`/admin/promotions/${c.couponid}/edit`, style="margin-right:8px;") ‚úèÔ∏è
                a.btn(href=`/admin/promotions/${c.couponid}/delete`, onclick="return confirm('X√≥a khuy·∫øn m√£i n√†y?')") üóëÔ∏è
    else
      .empty(style="text-align:center;padding:40px;background:#fff;border-radius:16px;color:#888;box-shadow:0 4px 12px rgba(0,0,0,0.04);")
        p(style="margin:0;font-size:15px;") Kh√¥ng c√≥ khuy·∫øn m√£i.

block scripts
  script.
    console.log("‚úÖ Promotions list loaded");

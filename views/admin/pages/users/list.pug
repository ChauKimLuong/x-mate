extends ../../layouts/default

block content
  .dash-wrap
    // HEADER
    .header(style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;")
      h2.welcome(style="font-weight:800;font-size:22px;") üë• User Management
      a.btn-dark(href="/admin/users/create" style="padding:10px 16px;font-weight:600;border-radius:10px;") + Add Staff

    // FILTER PANELS
    .cards(style="display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:24px;")
      a.card(href="/admin/users?role=All" style=`background:#fff4ee;padding:16px;border-radius:16px;text-align:center;text-decoration:none;color:#111;box-shadow:0 4px 12px rgba(0,0,0,0.04);border:${filter==='All'?'2px solid #ff6a21':'2px solid transparent'};`)
        h3(style="margin:0;font-weight:700;") üß© T·∫•t c·∫£
        p(style="margin:6px 0 0;font-size:26px;color:#ff6a21;font-weight:800;")= counts.all
      a.card(href="/admin/users?role=admin" style=`background:#e8f8f4;padding:16px;border-radius:16px;text-align:center;text-decoration:none;color:#111;box-shadow:0 4px 12px rgba(0,0,0,0.04);border:${filter==='admin'?'2px solid #1f7a47':'2px solid transparent'};`)
        h3(style="margin:0;font-weight:700;") üëë Admin
        p(style="margin:6px 0 0;font-size:26px;color:#1f7a47;font-weight:800;")= counts.admin
      a.card(href="/admin/users?role=staff" style=`background:#f9fafb;padding:16px;border-radius:16px;text-align:center;text-decoration:none;color:#111;box-shadow:0 4px 12px rgba(0,0,0,0.04);border:${filter==='staff'?'2px solid #555':'2px solid transparent'};`)
        h3(style="margin:0;font-weight:700;") üßë‚Äçüíº Staff
        p(style="margin:6px 0 0;font-size:26px;color:#555;font-weight:800;")= counts.staff
      a.card(href="/admin/users?role=customer" style=`background:#fde8e8;padding:16px;border-radius:16px;text-align:center;text-decoration:none;color:#111;box-shadow:0 4px 12px rgba(0,0,0,0.04);border:${filter==='customer'?'2px solid #b42318':'2px solid transparent'};`)
        h3(style="margin:0;font-weight:700;") üõí Kh√°ch h√†ng
        p(style="margin:6px 0 0;font-size:26px;color:#b42318;font-weight:800;")= counts.customer

    // USER TABLE
    if users.length
      table(style="width:100%;border-collapse:collapse;background:#fff;border-radius:16px;box-shadow:0 6px 18px rgba(0,0,0,0.05);overflow:hidden;")
        thead(style="background:#f9fafb;color:#555;font-size:15px;")
          tr
            th(style="text-align:left;padding:12px 16px;") H·ªç t√™n
            th Email
            th SƒêT
            th Gi·ªõi t√≠nh
            th Vai tr√≤
            th Tr·∫°ng th√°i
            th T·∫°o l√∫c
            th Thao t√°c
        tbody
          each u in users
            tr(style="border-top:1px solid #eee;")
              td(style="padding:12px 16px;")= u.full_name
              td(style="text-align:center")= u.email
              td(style="text-align:center")= u.phone || "-"
              td(style="text-align:center")= u.gender || "-"
              td(style="text-align:center")= (u.roles && u.roles.name) ? u.roles.name : "-"
              td(style="text-align:center") 
                if u.status === 'active'
                  span(style="background:#e6f9ef;color:#1f7a47;padding:4px 10px;border-radius:8px;font-size:13px;font-weight:600;") ‚úì Ho·∫°t ƒë·ªông
                else
                  span(style="background:#fde8e8;color:#b42318;padding:4px 10px;border-radius:8px;font-size:13px;font-weight:600;") ‚úï Kh√¥ng ho·∫°t ƒë·ªông
              td(style="text-align:center")= new Date(u.created_at).toLocaleDateString("vi-VN")
              td(style="text-align:center")
                a(href=`/admin/users/${u.id}/edit`, style="margin-right:8px;") ‚úèÔ∏è
                a(href=`/admin/users/${u.id}/delete`, onclick="return confirm('X√≥a ng∆∞·ªùi d√πng n√†y?')") üóëÔ∏è
    else
      .empty(style="text-align:center;padding:40px;background:#fff;border-radius:16px;color:#888;box-shadow:0 4px 12px rgba(247, 121, 31, 0.89);")
        p(style="margin:0;font-size:15px;") Kh√¥ng c√≥ ng∆∞·ªùi d√πng.

block scripts
  script.
    console.log("Users list loaded");

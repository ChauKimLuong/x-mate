//- Base layout (Khung dang extends day)
doctype html
html(lang="vi")
  head
    meta(charset="utf-8")
    meta(name="viewport", content="width=device-width, initial-scale=1")
    //- Title: trang con co the override bang block
    block title
      title X-Mate Shop

    //- CSS chung
    link(rel="stylesheet", href="/css/app.css")


    //- Trang con co the them CSS rieng
    block extra_css

  body
    //- Header
    include ../partials/header.pug

    //- (Optional) include mixins dung chung cho moi trang
    include ../mixins/product-card.pug

    //- Noi dung trang
    main
      block content

    //- Footer
    include ../partials/footer.pug

    //- Script chung (neu co)
    script.
      (function () {
        document.addEventListener('click', function (e) {
          var btn = e.target.closest('[data-menu-toggle]');
          if (!btn) return;
          var menu = document.querySelector('[data-menu]');
          if (menu) menu.classList.toggle('open');
        });

        var body = document.body;
        var header = document.querySelector('.site-header');
        if (!header) return;

        var lastScrollState = false;
        var SCROLL_THRESHOLD = 80;

        function updateScrollState() {
          var y = window.scrollY || window.pageYOffset;
          var nextState = y > SCROLL_THRESHOLD;
          if (nextState !== lastScrollState) {
            body.classList.toggle('has-scrolled', nextState);
            lastScrollState = nextState;
          }
        }

        var ticking = false;
        window.addEventListener('scroll', function () {
          if (ticking) return;
          ticking = true;
          window.requestAnimationFrame(function () {
            updateScrollState();
            ticking = false;
          });
        }, { passive: true });

        updateScrollState();
      })();

    //- Trang con co the them script rieng
    block extra_js

